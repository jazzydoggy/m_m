<?php
    /**
* 字串半形和全形間相互轉換
* @param string $str 待轉換的字串
* @param int  $type TODBC:轉換為半形；TOSBC，轉換為全形
* @return string 返回轉換後的字串
*/
function convertStrType($str, $type) {
    $dbc = array( 
    '０' , '１' , '２' , '３' , '４' , 
    '５' , '６' , '７' , '８' , '９' , 
    'Ａ' , 'Ｂ' , 'Ｃ' , 'Ｄ' , 'Ｅ' , 
    'Ｆ' , 'Ｇ' , 'Ｈ' , 'Ｉ' , 'Ｊ' , 
    'Ｋ' , 'Ｌ' , 'Ｍ' , 'Ｎ' , 'Ｏ' , 
    'Ｐ' , 'Ｑ' , 'Ｒ' , 'Ｓ' , 'Ｔ' , 
    'Ｕ' , 'Ｖ' , 'Ｗ' , 'Ｘ' , 'Ｙ' , 
    'Ｚ' , 'ａ' , 'ｂ' , 'ｃ' , 'ｄ' , 
    'ｅ' , 'ｆ' , 'ｇ' , 'ｈ' , 'ｉ' , 
    'ｊ' , 'ｋ' , 'ｌ' , 'ｍ' , 'ｎ' , 
    'ｏ' , 'ｐ' , 'ｑ' , 'ｒ' , 'ｓ' , 
    'ｔ' , 'ｕ' , 'ｖ' , 'ｗ' , 'ｘ' , 
    'ｙ' , 'ｚ' , '－' , '　' , '：' ,
    '．' , '，' , '／' , '％' , '＃' ,
    '！' , '＠' , '＆' , '（' , '）' ,
    '＜' , '＞' , '＂' , '＇' , '？' ,
    '［' , '］' , '｛' , '｝' , '＼' ,
    '｜' , '＋' , '＝' , '＿' , '＾' ,
    '￥' , '￣' , '｀' ,'\'','\\'
    );
    $sbc = array( //半形
    '0', '1', '2', '3', '4', 
    '5', '6', '7', '8', '9', 
    'A', 'B', 'C', 'D', 'E', 
    'F', 'G', 'H', 'I', 'J', 
    'K', 'L', 'M', 'N', 'O', 
    'P', 'Q', 'R', 'S', 'T', 
    'U', 'V', 'W', 'X', 'Y', 
    'Z', 'a', 'b', 'c', 'd', 
    'e', 'f', 'g', 'h', 'i', 
    'j', 'k', 'l', 'm', 'n', 
    'o', 'p', 'q', 'r', 's', 
    't', 'u', 'v', 'w', 'x', 
    'y', 'z', '-', ' ', ':',
    '.', ',', '/', '%', ' #',
    '!', '@', '&', '(', ')',
    '<', '>', '"', '\'','?',
    '[', ']', '{', '}', '\\',
    '|', ' ', '=', '_', '^',
    '￥','~', '`','\'\'','\\\\'
    );
    if($type == 'TODBC') {
        return str_replace( $sbc, $dbc, $str ); //半形到全形
    }elseif($type == 'TOSBC') {
        return str_replace( $dbc, $sbc, $str ); //全形到半形
    }else{
        return $str;
    }
}
    
?>